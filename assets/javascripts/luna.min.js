(function(b,a){a.Luna={removePerson:function(c){b(c).parent().remove();return false},addBeneficiary:function(d,c){var f=b("<div>").html(c).text();var j=b("ul#luna-beneficiaries");if(j.children("li."+d).length==0){var e=b("<li>").addClass(d).html(f);var k=b("<select>").attr("name","users["+d+"]");var l=j.data("levels");for(var g=0;g<l.length;g++){var h=b("<option>").attr("value",l[g].value).html(l[g].name);k.append(h)}e.append(k);j.append(e)}},getFilterNames:function(){b.ajax({url:b("#luna-newfilter").data("filternames-url"),dataType:"json",beforeSend:function(d,c){b("#luna-newfilter-name").html(b("<img>").attr("src",a.ASSETS_URL+"images/ajax_indicator_small.gif"))},success:function(d){var c=b("<select>").attr("name","column").on("change",function(){b.ajax({url:b("#luna-newfilter").data("filterdata-url"),data:{column:b('select[name="column"] option:selected').val()},dataType:"json",beforeSend:function(f,e){b("#luna-newfilter-config").html(b("#luna-newfilter-config").html()+b("<img>").attr("src",a.ASSETS_URL+"images/ajax_indicator_small.gif"))},success:function(h){var i=h.compare;var g=b("<select>").attr("name","compare");b.each(i,function(j,k){var l=b("<option>").attr("value",j).html(k);g.append(l)});var f=h.values;var e=b("<select>").attr("name","value");b.each(f,function(j,l){var k=b("<option>").attr("value",j).html(l);e.append(k)});b("#luna-newfilter-config").html(g+e)}})});b.each(d,function(e,g){var f=b("<option>").attr("value",e).html(g);c.append(f)});b("#luna-newfilter").html(c)}})}};b(document).ready(function(){b("#luna-add-filter").on("click",function(c){a.Luna.getFilterNames();return false})})}(jQuery,STUDIP));